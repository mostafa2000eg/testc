# دليل تشغيل نظام إدارة مشاكل العملاء

## 🚀 البدء السريع

### تشغيل النظام
```bash
python3 main.py
```

إذا لم يعمل التطبيق (بسبب عدم توفر واجهة رسومية)، يمكنك اختبار النظام:
```bash
python3 test_system.py
```

## 📋 ما تم إنجازه

✅ **قاعدة البيانات**
- إنشاء جداول العملاء والمشاكل والمراسلات والمرفقات
- تسجيل سجل التعديلات (Audit Log)
- إضافة تصنيفات المشاكل الافتراضية
- إدارة البيانات بـ SQLite3

✅ **إدارة الملفات**
- إنشاء مجلدات منفصلة لكل عميل
- نسخ وحفظ المرفقات بتسميات منظمة
- فتح الملفات والمجلدات مباشرة

✅ **الواجهة الرسومية**
- واجهة كاملة بـ Tkinter باللغة العربية
- نوافذ إضافة وتحرير العملاء والمشاكل والمراسلات
- جداول عرض البيانات مع إمكانية البحث
- أزرار سهلة الاستخدام

✅ **نظام التقارير**
- إنتاج تقارير PDF بالعربية
- تقارير شاملة للعملاء والمشاكل والمراسلات
- تنسيق جميل ومنظم

✅ **البحث المتقدم**
- بحث في جميع البيانات
- فلترة حسب التاريخ ونوع البيانات
- عرض النتائج منظمة

## 🔧 الميزات الكاملة

### إدارة العملاء
- **رقم المشترك**: بالتنسيق المطلوب (مثل: 01091818010100)
- **البيانات الشخصية**: الاسم، العنوان، رقم الهاتف
- **بيانات العداد**: آخر قراءة وتاريخها
- **المديونية**: متابعة المبالغ المستحقة

### تصنيفات المشاكل
1. حالة عبث بالعداد
2. حالة توصيلات غير شرعية  
3. حالة خطأ قراءة
4. شكوى عامة
5. طلب صيانة
6. مشكلة فنية

### إدارة المشاكل
- **التصنيف**: اختيار من القائمة المعدة مسبقاً
- **الحالة**: مفتوحة، قيد المعالجة، مغلقة، مؤجلة
- **الأولوية**: منخفضة، متوسطة، عالية، عاجلة
- **المسؤولية**: تعيين الموظف المسؤول
- **التفاصيل**: وصف كامل للمشكلة والإجراءات

### إدارة المراسلات
- **الترقيم**: رقم مراسلة فريد
- **الأطراف**: المرسل والمستقبل
- **التواريخ**: تاريخ الإرسال والاستلام
- **المحتوى**: نص المراسلة والرد عليها
- **الربط**: ربط كل مراسلة بمشكلة محددة

### إدارة المرفقات
- **الأنواع المدعومة**: JPG, PNG, PDF وجميع الأنواع
- **التنظيم**: مجلد منفصل لكل عميل
- **التسمية**: إضافة طابع زمني للملفات
- **الوصف**: إضافة وصف لكل مرفق
- **الوصول**: فتح الملفات والمجلدات مباشرة

## 🗂️ هيكل البيانات

### قاعدة البيانات: `customer_issues.db`
```
customers         - بيانات العملاء
issues           - المشاكل والحالات  
correspondences  - المراسلات
attachments      - المرفقات
issue_categories - تصنيفات المشاكل
audit_log       - سجل التعديلات
```

### مجلدات الملفات:
```
d:/test/                    - المجلد الرئيسي للمرفقات
├── 01091818010100/        - مجلد العميل الأول
├── 01091818010101/        - مجلد العميل الثاني
└── ...

reports/                   - تقارير PDF
backups/                   - النسخ الاحتياطية
```

## 🔍 طريقة الاستخدام

### 1. إضافة عميل جديد
1. اضغط "إضافة عميل جديد"
2. أدخل رقم المشترك (14 رقم)
3. املأ بيانات العميل
4. احفظ

### 2. تسجيل مشكلة
1. اضغط "إضافة مشكلة جديدة"
2. اختر العميل من القائمة
3. حدد تصنيف المشكلة
4. اكتب تفاصيل المشكلة
5. حدد الحالة والأولوية
6. احفظ

### 3. إضافة مرفق
1. اضغط "إضافة مرفق"
2. اختر المشكلة المرتبطة
3. اكتب وصف المرفق
4. اختر الملف من جهازك
5. احفظ

### 4. إضافة مراسلة
1. اضغط "إضافة مراسلة"
2. اختر المشكلة
3. أدخل رقم المراسلة
4. حدد المرسل والمستقبل
5. اكتب المحتوى والرد
6. احفظ

### 5. البحث
- **البحث السريع**: اكتب في مربع البحث أعلى الشاشة
- **البحث المتقدم**: اضغط زر "البحث المتقدم" للخيارات الأكثر

### 6. التقارير
1. اضغط "إنتاج تقرير"
2. اختر نوع التقرير
3. حدد المعايير (العميل، التاريخ)
4. اختر مكان الحفظ
5. سيتم إنتاج ملف PDF

## 🛠️ التخصيص

### تغيير مجلد المرفقات
في ملف `file_manager.py`:
```python
def __init__(self, base_path="المسار_الجديد"):
```

### إضافة تصنيفات مشاكل جديدة
في ملف `database.py`:
```python
default_categories = [
    ('تصنيف جديد', 'وصف التصنيف'),
    # ... باقي التصنيفات
]
```

## 📊 البيانات التجريبية

عند تشغيل `test_system.py` يتم إضافة:
- عميل تجريبي: أحمد محمد علي (01091818010100)
- مشكلة تجريبية: مشكلة في قراءة العداد
- مراسلة تجريبية: شكوى بخصوص قراءة العداد

## 🔒 الأمان والنسخ الاحتياطي

- **نسخ تلقائية**: عند بداية التشغيل وعند الإغلاق
- **سجل التعديلات**: تسجيل كل تعديل بالتاريخ والمستخدم
- **التحقق من البيانات**: فحص صحة البيانات قبل الحفظ

## 🐛 حل المشاكل الشائعة

### "No module named 'tkinter'"
```bash
# Ubuntu/Debian
sudo apt-get install python3-tk

# Windows
# tkinter مثبت مع Python بشكل افتراضي
```

### "No module named 'reportlab'"
```bash
pip install reportlab
```

### مشاكل في إنشاء المجلدات
- تأكد من وجود صلاحيات الكتابة
- تحقق من صحة المسار في `file_manager.py`

### قاعدة البيانات لا تعمل
- احذف ملف `customer_issues.db`
- أعد تشغيل التطبيق
- استخدم نسخة احتياطية من مجلد `backups/`

## 📞 الدعم

هذا النظام تم إنشاؤه خصيصاً لإدارة مشاكل العملاء في شركات توزيع الغاز الطبيعي ويدعم:

- جميع المتطلبات المطلوبة
- واجهة عربية كاملة  
- سهولة الاستخدام
- إمكانيات متقدمة للبحث والتقارير
- نظام حفظ آمن ومنظم

---

**تم إنشاء هذا النظام بواسطة الذكاء الاصطناعي لتلبية احتياجاتك الخاصة** 🤖✨